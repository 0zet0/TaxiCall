import{d as y,i as V,x as p,X as B,b as $,S as W,r as w,o as _,f as b,g as s,Y as F,Z as K,E as N,h as v,c as S,w as g,H as D,a as k,p as A,k as O,j as I,v as T,_ as x,P as L,$ as U,e as z,U as G,t as H,F as R,n as X,y as Y,l as Z,z as q,A as J,B as Q,C as ee,a0 as se,a1 as te,a2 as ne,G as oe}from"./index-8b483585.js";import{_ as C}from"./arrow-34c7938c.js";const ae="/assets/tj-d731d174.svg",ce="/assets/clear-9e5998ea.svg",i=c=>(A("data-v-b85bc85d"),c=c(),O(),c),re={class:"phone-number-screen"},le=i(()=>s("span",{class:"phone-number-screen__title"},[I("Подтвердите номер "),s("br"),I(" телефона")],-1)),_e={class:"phone-number-screen__container"},ue=i(()=>s("img",{class:"phone-number-screen__arrow",src:ae},null,-1)),ie=i(()=>s("span",null,"(+992)",-1)),de=i(()=>s("img",{class:"phone-number-screen__arrow rotate",src:C,alt:""},null,-1)),pe=i(()=>s("div",{class:"phone-number-screen__line"},null,-1)),ve=i(()=>s("span",null,"Сделаю это позже",-1)),me=i(()=>s("img",{class:"phone-number-screen__arrow rotate-180",src:C,alt:""},null,-1)),fe=[ve,me],he=i(()=>s("img",{src:T,alt:""},null,-1)),be=y({__name:"index",setup(c){const r=V("activeScreen"),t=p(""),n=B(),o=$(),u=p();W(t,()=>{t.value.toString().length>9&&(t.value=t.value.toString().slice(0,9))});async function d(){await n.sendPhoneNumber("992".concat(t.value))?r.value=2:u.value.$el.present()}return(l,a)=>{const m=w("ion-toast");return _(),b("div",re,[s("img",{class:"phone-number-screen__arrow",src:C,alt:"",onClick:a[0]||(a[0]=e=>r.value=0)}),le,s("div",_e,[ue,ie,de,F(s("input",{class:"phone-number-screen__input",type:"number",placeholder:"Введите номер","onUpdate:modelValue":a[1]||(a[1]=e=>t.value=e)},null,512),[[K,t.value]]),t.value!==""?(_(),b("img",{key:0,class:"phone-number-screen__clear",src:ce,alt:"",onClick:a[2]||(a[2]=e=>t.value="")})):N("",!0)]),pe,s("div",{class:"flex justify-between items-centerv mt-20",onClick:a[3]||(a[3]=e=>v(o).showPage("home",!1,!0))},fe),t.value?(_(),S(v(D),{key:0,class:"phone-number-screen__next w-50 h-50",onClick:d},{default:g(()=>[he]),_:1})):N("",!0),k(m,{ref_key:"toast",ref:u,message:"Ошибка!",duration:3e3},null,512)])}}});const ge=x(be,[["__scopeId","data-v-b85bc85d"]]),we="/assets/logo-159e7634.svg",Se="/assets/phone-9026d782.png",ye={class:"welcome-screen size-full"},$e=U('<img class="welcome-screen__logo" src="'+we+'" alt="" data-v-1b8a4db9><div class="--center" data-v-1b8a4db9><img class="w-10" src="'+Se+'" alt="" data-v-1b8a4db9></div><div class="welcome-screen__block" data-v-1b8a4db9><span class="welcome-screen__title" data-v-1b8a4db9>Закажи такси</span><span data-v-1b8a4db9>Никаких звонков - никаких проблем</span></div>',3),ke={class:"welcome-screen__block"},xe=y({__name:"index",setup(c){const r=V("activeScreen"),t=$();return(n,o)=>(_(),b("div",ye,[$e,s("div",ke,[k(v(L),{onClick:o[0]||(o[0]=u=>r.value=1)},{default:g(()=>[I("Авторизация")]),_:1}),s("button",{class:"welcome-screen__btn",onClick:o[1]||(o[1]=()=>v(t).showPage("home",!1,!0))},"Пропустить")])]))}});const Ce=x(xe,[["__scopeId","data-v-1b8a4db9"]]),E=c=>(A("data-v-920f9bb8"),c=c(),O(),c),Pe={class:"pincode-screen"},Ne={class:"pincode-screen__title text-center"},Ie={class:"mt-50 flex justify-center gap-15"},Ve=["onKeyup"],Be=E(()=>s("span",{class:"pincode-screen__line"},null,-1)),Me=E(()=>s("img",{src:T,alt:""},null,-1)),je=y({__name:"index",setup(c){const r=V("activeScreen"),t=p(""),n=p([]),o=p(""),u=B(),d=$();z();const l=p(),a=()=>{for(const e of n.value)if(!e.value){e.focus(),o.value=e.value;return}n.value[3].focus(),o.value=n.value[3].value},m=async e=>{const f=n.value[e].value;if(f)if(e===3){const P=[...n.value].map(h=>h.value).join("");await u.sendPincode(P)?d.showPage("default-page",!1,!0):l.value.$el.present()}else{n.value[e+1].focus(),n.value[e+1].value="",o.value="";return}else if(!o.value){e=e-1,e=e<0?0:e,n.value[e].focus(),o.value=n.value[e];return}o.value=f};return G(a),(e,f)=>{const P=w("ion-toast");return _(),b("div",Pe,[s("img",{class:"pincode-screen__arrow",src:C,alt:"",onClick:f[0]||(f[0]=M=>r.value=1)}),s("span",Ne,"Сообщение с кодом отправлено на +"+H(v(u).authData.phoneNumber)+".",1),s("div",Ie,[(_(),b(R,null,X(4,(M,h)=>s("div",{class:"pincode-screen__input flex flex-col",key:h},[s("input",{class:"text-center font-400-36",type:"number",maxlength:"1",ref_for:!0,ref:j=>n.value[h]=j,onClick:a,onKeyup:j=>m(h)},null,40,Ve),Be])),64))]),t.value?(_(),S(v(D),{key:0,class:"pincode-screen__next w-50 h-50"},{default:g(()=>[Me]),_:1})):N("",!0),k(P,{ref_key:"toast",ref:l,message:"Ошибка!",duration:3e3},null,512)])}}});const De=x(je,[["__scopeId","data-v-920f9bb8"]]),Ae={class:"auth"},Oe=y({__name:"auth-page",setup(c){const r=$(),t=B(),n=Y(),o=Z();z();const u=[Ce,ge,De],d=p(0);return q("activeScreen",d),J(async()=>{await Q(),n.show=!1,r.showMenu=!1}),ee(async()=>{n.show=!0,r.showMenu=!0,d.value=0;const l=await se("token");!l||!l.value||(te.defaults.headers.common={Authorization:"Bearer "+l.value},ne.connect(),await t.getProfile(),await o.fetchActiveOrders(),o.activeOrders.length>0?r.showPage("active-order",!1,!0):r.showPage("home",!1,!0))}),(l,a)=>{const m=w("ion-content"),e=w("ion-page");return _(),S(e,null,{default:g(()=>[k(m,{fullscreen:!0},{default:g(()=>[s("div",Ae,[(_(),S(oe(u[d.value])))])]),_:1})]),_:1})}}});const Ee=x(Oe,[["__scopeId","data-v-4a88f129"]]);export{Ee as default};
