import{S as A}from"./index-a7043f5b.js";/* empty css                                                              */import{d as g,o as u,f as p,g as s,l as B,b as M,e as H,x as v,I as y,a3 as T,r as h,t as F,a as l,w as d,h as n,m as S,H as b,K as Z,p as D,k as L,j as V,_ as P,u as N,y as R,S as j,A as z,B as E,C as W,c as I,n as G,F as K}from"./index-8b483585.js";import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-afbfb581.js";const J={xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30",fill:"none"},Q=["fill"],U=g({__name:"index",props:{color:{type:String,default:"#343434"}},setup(o){return(e,i)=>(u(),p("svg",J,[s("path",{d:"M7.76919 26.9998C8.81511 26.9998 10.2843 26.6216 12.4844 25.3926C15.1598 23.8926 17.2292 22.5078 19.8901 19.8543C22.4556 17.2909 23.7041 15.6313 25.4514 12.4523C27.4253 8.86297 27.0889 6.98152 26.7127 6.1774C26.2648 5.21632 25.6035 4.64149 24.7489 4.07094C24.2635 3.75296 23.7498 3.48038 23.2143 3.25665C23.1607 3.23361 23.1109 3.21165 23.0664 3.19183C22.8012 3.07236 22.3993 2.89182 21.8903 3.08468C21.5506 3.21218 21.2473 3.47308 20.7726 3.94184C19.799 4.90185 18.4685 7.03991 17.9777 8.08992C17.6482 8.79761 17.4301 9.26476 17.4296 9.78869C17.4296 10.4021 17.7382 10.8751 18.1127 11.3857C18.1829 11.4816 18.2526 11.5732 18.3201 11.6621C18.7279 12.1978 18.8173 12.3527 18.7584 12.6291C18.6389 13.1846 17.7478 14.8384 16.2834 16.2993C14.819 17.7602 13.2126 18.5949 12.6548 18.7138C12.3666 18.7754 12.2085 18.6822 11.6555 18.26C11.5762 18.1995 11.4948 18.1368 11.4096 18.0741C10.8384 17.6493 10.3872 17.3488 9.78817 17.3488H9.78496C9.2636 17.3488 8.81726 17.5749 8.07782 17.9477C7.11334 18.4342 4.91057 19.7472 3.94448 20.7217C3.47456 21.1953 3.21254 21.4974 3.08448 21.8365C2.89158 22.3471 3.07323 22.7472 3.19164 23.0151C3.21147 23.0596 3.23344 23.1083 3.25648 23.1624C3.48202 23.6968 3.75627 24.2094 4.07575 24.6935C4.64533 25.5453 5.22242 26.2048 6.18583 26.6532C6.68054 26.8871 7.22195 27.0057 7.76919 26.9998Z",fill:o.color},null,8,Q)]))}}),X={xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30",fill:"none"},Y=["fill"],ee=g({__name:"index",props:{color:{type:String,default:"#343434"}},setup(o){return(e,i)=>(u(),p("svg",X,[s("path",{d:"M26.25 22.5H3.75V20H26.25V22.5ZM26.25 16.25H3.75V13.75H26.25V16.25ZM26.25 10H3.75V7.5H26.25V10Z",fill:o.color},null,8,Y)]))}}),C=o=>(D("data-v-79e93cee"),o=o(),L(),o),te={class:"flex flex-col gap-5"},se={class:"font-600-20 auto-truncate"},oe={class:"font-400-13 auto-truncate"},ae={class:"active-order-item__container w-full"},re={class:"flex flex-col",style:{"min-height":"0px"}},ne=C(()=>s("span",{class:"active-order-item__line"},null,-1)),ce={class:"--center gap-50 mt-17"},le={key:0,class:"--center flex-col gap-7"},ie=C(()=>s("span",{class:"active-order-item__text font-400-12"},[V("Отменить "),s("br"),V(" заказ")],-1)),ue={key:1,class:"--center flex-col gap-7"},de=C(()=>s("span",{class:"active-order-item__text font-400-12"},"Позвонить",-1)),_e={class:"--center flex-col gap-7"},pe=C(()=>s("span",{class:"active-order-item__text font-400-12"},"Детали",-1)),me=g({__name:"index",props:{item:{type:Object,default:()=>({address:"",city:"",icon:""})},active:{type:Boolean,default:!1}},setup(o){const e=o,i=B(),w=M();H();const t=v(),_=async()=>{if(!e.item.id)return;await i.cancelOrders(e.item.id)?(t.value.$el.message="Ваш заказ успешно отменен.",t.value.$el.present()):(t.value.$el.message="Не удалось отменить заказ!",t.value.$el.present())},x=async()=>{if(!e.item.id)return;await i.connectClientPerformer(e.item.id)?(t.value.$el.message="Ваш запрос принят. Ждите звонка.",t.value.$el.present()):(t.value.$el.message="Ошибка!",t.value.$el.present())},m=y(()=>{switch(e.item.status){case"Поступило":return!0;case"Не оформлен":return!0;case"Водитель назначен":return!0;default:return!1}}),$=y(()=>{var r,c;switch(e.item.status){case"Поступило":return"Ищем ближайших водителей...";case"Не оформлен":return"Ищем ближайших водителей...";case"Водитель на месте":return"Водитель на месте,\n можете выходить";case"Исполняется":return"За рулем ".concat(((r=e.item.performer)==null?void 0:r.first_name)||"Водитель");case"Водитель назначен":return"В ближайшее время \n приедет ".concat((c=e.item.performer)==null?void 0:c.first_name);default:return""}}),a=y(()=>{var r,c;return e.item.performer==null||e.item.status=="Поступило"?"Среднее время поиска водителя ≈ 4 мин":"".concat(((r=e.item.performer.transport)==null?void 0:r.color)||""," ").concat(((c=e.item.performer.transport)==null?void 0:c.model)||"")});return T(e.item.icon,"icons","svg"),(r,c)=>{const k=h("ion-toast");return u(),p("div",{class:Z(["active-order-item flex flex-col",{active:o.active}])},[s("div",te,[s("span",se,F($.value),1),s("span",oe,F(a.value),1)]),s("div",ae,[s("div",re,[ne,s("div",ce,[m.value?(u(),p("div",le,[l(n(b),{class:"w-55 h-55",background:"#F5F4F2",color:"#000",onClick:S(_,["prevent","stop"])},{default:d(()=>[l(n(q))]),_:1},8,["onClick"]),ie])):(u(),p("div",ue,[l(n(b),{class:"w-55 h-55",background:"#F5F4F2",color:"#000",onClick:S(x,["prevent","stop"])},{default:d(()=>[l(n(U))]),_:1},8,["onClick"]),de])),s("div",_e,[l(n(b),{class:"w-55 h-55",background:"#F5F4F2",color:"#000",onClick:c[0]||(c[0]=S(O=>{n(i).selectedActiveOrders=o.item,n(w).showPage("order-detail")},["prevent","stop"]))},{default:d(()=>[l(n(ee))]),_:1}),pe])])])]),l(k,{ref_key:"toast",ref:t,message:"Ваш запрос принят. Ждите звонка.",duration:4e3},null,512)],2)}}}),fe=P(me,[["__scopeId","data-v-79e93cee"]]),ve={class:"active-order-page"},he={class:"active-order-page__wrapper size-full"},ge=g({__name:"active-order-page",setup(o){const e=M();N();const i=B(),w=R(),t=v(),_=v(!0),x=H(),m=v(),$=a=>{m.value=m.value===a.id?null:a.id};return j(()=>i.activeOrders.length,a=>{a===0&&e.showPage("home",!1,!0)}),z(async()=>{await E(),_.value=!0,t.value.$el.present(),e.showMenu=!0,w.show=!0,e.toggle=a=>{_.value=!a,e.show=!a,a?t.value.$el.dismiss():x.currentRoute.value.name==="ActiveOrderPage"&&t.value.$el.present()}}),W(()=>{_.value=!1,t.value.$el.dismiss(),e.showMenu=!1}),(a,r)=>{const c=h("ion-modal"),k=h("ion-content"),O=h("ion-page");return u(),I(O,null,{default:d(()=>[l(k,{fullscreen:!0},{default:d(()=>[s("div",ve,[l(c,{ref_key:"modal",ref:t,"initial-breakpoint":.25,breakpoints:[.25,.5,.75],"is-open":!0,"backdrop-breakpoint":1,onDidDismiss:r[0]||(r[0]=()=>_.value&&t.value.$el.present())},{default:d(()=>[s("div",he,[l(n(A),{class:"mt-16 pl-16 pr-16",height:"calc(75% - 120px)"},{default:d(()=>[(u(!0),p(K,null,G(n(i).activeOrders,f=>(u(),I(n(fe),{key:f.id,item:f,active:m.value===f.id,onClick:Ce=>$(f)},null,8,["item","active","onClick"]))),128))]),_:1})])]),_:1},512)])]),_:1})]),_:1})}}});const ye=P(ge,[["__scopeId","data-v-b2f7b632"]]);export{ye as default};
